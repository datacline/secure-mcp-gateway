# MCP Servers Configuration
# Define MCP servers that the gateway can proxy to

servers:
  # Default/Example MCP server (for local development)
  default:
    url: http://localhost:3000/mcp
    type: mock-mcp
    timeout: 30
    enabled: true
    description: "Local mock MCP server for testing"
    tags: []
    tools: ["get_logs", "search_data"]  # Explicit tool declaration
    auth: null
    metadata:
      cluster: "local"
      region: "localhost"
      description: "Mock server for local testing and development"

  # Mock server (only works in Docker)
  mock-server:
    url: http://mock-mcp-server:3000/mcp
    type: http
    timeout: 30
    enabled: true
    description: "Mock MCP server in Docker"
    tags: []
    tools: ["get_logs", "search_data"]
    auth: null
    metadata:
      cluster: "docker"
      region: "localhost"
      description: "Mock server in Docker environment"

  # GitHub Copilot MCP Server
  github:
    type: http
    url: https://api.githubcopilot.com/mcp
    timeout: 60
    enabled: true  # Disabled by default - enable when you have a token
    description: "GitHub Copilot MCP server"
    tags: ["github", "copilot", "code"]
    tools: ["*"]  # Supports various tools
    auth:
      method: bearer
      location: header
      name: Authorization
      format: prefix
      prefix: "Bearer "
      credential_ref: env://GITHUB_MCP_PAT
    metadata:
      cluster: "github"
      region: "cloud"
      description: "GitHub Copilot MCP services" 

  figma:
    url: https://mcp.figma.com/mcp
    type: http

  # Notion MCP Server
  # Note: When running Notion MCP server with --transport http, it generates a bearer token
  # The NOTION_TOKEN env var is the Notion API token (ntn_*) used BY the MCP server
  # The NOTION_MCP_BEARER_TOKEN is the HTTP auth token generated BY the MCP server
  notion:
    url: http://localhost:8081/mcp
    type: http
    timeout: 60
    enabled: true  # Enabled - NOTION_MCP_BEARER_TOKEN is set
    description: "Notion MCP server for workspace integration"
    tags: ["notion", "productivity", "workspace"]
    tools: ["*"]  # Supports search, read, create pages, add comments, query databases
    auth:
      method: bearer
      location: header
      name: Authorization
      format: prefix
      prefix: "Bearer "
      credential_ref: env://NOTION_MCP_BEARER_TOKEN  # This is the HTTP bearer token from MCP server startup
    metadata:
      cluster: "local"
      region: "localhost"
      description: "Notion workspace integration via MCP"
      capabilities: ["search_workspace", "read_pages", "create_pages", "add_comments", "query_databases"]
      note: "Requires Notion integration token (ntn_*) from workspace settings"

  # Example: Elasticsearch MCP servers across multiple clusters
  # elasticsearch-campaign-us:
  #   url: https://elk-campaign-us.example.com
  #   type: elasticsearch-mcp
  #   timeout: 60                                                       
  #   enabled: true
  #   description: "Elasticsearch - Campaign data (US region)"
  #   tags: ["elk-logs", "campaign"]
  #   tools: ["search_logs", "get_indices", "query_data", "aggregate_data"]
  #   auth:
  #     method: api_key
  #     location: header
  #     name: X-API-Key
  #     format: raw
  #     credential_ref: env://ELASTICSEARCH_API_KEY
  #   metadata:
  #     cluster: "campaign-us"
  #     region: "us-east-1"
  #     description: "Campaign marketing data - US region"
  #     data_sources: ["marketing_campaigns", "ad_performance", "conversion_tracking"]
  #     retention: "90 days"

  # elasticsearch-campaign-eu:
  #   url: https://xcelk-campaign-eu.example.com
  #   type: elasticsearch-mcp
  #   timeout: 60
  #   enabled: true
  #   description: "Elasticsearch - Campaign data (EU region)"
  #   tags: ["elk-logs", "campaign"]
  #   tools: ["search_logs", "get_indices", "query_data", "aggregate_data"]
  #   auth:
  #     method: api_key
  #     location: header
  #     name: X-API-Key
  #     format: raw
  #     credential_ref: env://ELASTICSEARCH_API_KEY
  #   metadata:
  #     cluster: "campaign-eu"
  #     region: "eu-west-1"
  #     description: "Campaign marketing data - EU region (GDPR compliant)"
  #     data_sources: ["marketing_campaigns", "ad_performance", "gdpr_compliant_data"]
  #     retention: "90 days"

  # elasticsearch-events:
  #   url: https://elk-events.example.com
  #   type: elasticsearch-mcp
  #   timeout: 60
  #   enabled: true
  #   description: "Elasticsearch - User events and service logs"
  #   tags: ["elk-logs", "events"]
  #   tools: ["search_logs", "get_indices", "query_data", "aggregate_data"]
  #   auth:
  #     method: api_key
  #     location: header
  #     name: X-API-Key
  #     format: raw
  #     credential_ref: env://ELASTICSEARCH_API_KEY
  #   metadata:
  #     cluster: "events"
  #     region: "us-east-1"
  #     description: "User event tracking and service logs"
  #     data_sources: ["user_events", "page_views", "interactions", "service_logs"]
  #     retention: "30 days"

  # Example: Production MCP server with API Key authentication
  # salesforce-prod:
  #   url: https://mcp.salesforce.example.com
  #   type: http
  #   timeout: 60
  #   enabled: true
  #   description: "Salesforce MCP server"
  #   tags: ["salesforce", "crm"]
  #   tools: ["*"]
  #   auth:
  #     method: api_key
  #     location: header
  #     name: X-API-Key
  #     format: raw
  #     credential_ref: env://SALESFORCE_API_KEY
  #     allowed_hosts:
  #       - mcp.salesforce.example.com

  # Example: Bearer token authentication
  # internal-api:
  #   url: https://api.internal.example.com
  #   type: http
  #   timeout: 30
  #   enabled: true
  #   description: "Internal API MCP server"
  #   auth:
  #     method: bearer
  #     location: header
  #     name: Authorization
  #     format: prefix
  #     prefix: "Bearer "
  #     credential_ref: env://INTERNAL_API_TOKEN

  # Example: Basic authentication
  # legacy-system:
  #   url: https://legacy.example.com
  #   type: http
  #   timeout: 30
  #   enabled: true
  #   description: "Legacy system MCP server"
  #   auth:
  #     method: basic
  #     location: header
  #     name: Authorization
  #     format: prefix
  #     prefix: "Basic "
  #     credential_ref: env://LEGACY_BASIC_AUTH

  # Example: Custom format with template
  # custom-api:
  #   url: https://custom.example.com
  #   type: http
  #   timeout: 30
  #   enabled: true
  #   description: "Custom API with special auth format"
  #   auth:
  #     method: custom
  #     location: header
  #     name: X-Custom-Auth
  #     format: template
  #     template: "CustomToken {credential}"
  #     credential_ref: env://CUSTOM_API_TOKEN

  # Example: OAuth2 with vault reference
  # oauth-service:
  #   url: https://oauth.example.com
  #   type: http
  #   timeout: 60
  #   enabled: true
  #   description: "OAuth2 protected MCP server"
  #   auth:
  #     method: oauth2
  #     location: header
  #     name: Authorization
  #     format: prefix
  #     prefix: "Bearer "
  #     credential_ref: vault://kv/datacline/oauth_token?v=3
  #     metadata:
  #       token_type: access_token
  #       scope: mcp:read mcp:write

  # Example: File-based credential
  # file-auth:
  #   url: https://file-based.example.com
  #   type: http
  #   timeout: 30
  #   enabled: true
  #   description: "MCP server with file-based auth"
  #   auth:
  #     method: api_key
  #     location: header
  #     name: X-API-Key
  #     format: raw
  #     credential_ref: file:///etc/secrets/api_key.txt
